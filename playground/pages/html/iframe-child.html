<!doctype html>
<html lang="en" data-ready="false">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Iframe Child</title>
  <link rel="stylesheet" href="../styles/base.css" />
  <link rel="stylesheet" href="../styles/components.css" />
</head>

<body>
  <main data-testid="main" id="main">
    <h1 style="font-size:18px" data-testid="page-title">Iframe Child</h1>
    <div data-testid="page-id" data-page-id="iframe-child"></div>

    <p class="badge" data-testid="child-status" data-status="waiting">waitingâ€¦</p>
  </main>

  <script>
    (() => { const s = document.querySelector("[data-testid='child-status']"); const allowedOrigin = new URLSearchParams(location.search).get("parentOrigin") || location.origin; window.addEventListener("message", (e) => { if (e.source !== window.parent || e.origin !== allowedOrigin) return; const d = e.data; if (d && d.type === "ping") { s.textContent = "received ping"; s.dataset.status = "ping"; window.parent.postMessage({ type: "pong", payload: "ok" }, allowedOrigin); } }); document.documentElement.dataset.ready = "true"; })();
  </script>
</body>

</html>